<!DOCTYPE html>
<html lang="en">
<head>
\0
0.+
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-L4WC6NVKHG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-L4WC6NVKHG');
</script>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1825078358159503"
     crossorigin="anonymous"></script>

    <meta charset="UTF-8">
    <title>ì„œë¸Œì›¨ì´ ì˜ì–‘ì„±ë¶„ ê³„ì‚°ê¸°</title>
    <meta name="description" content="ì„œë¸Œì›¨ì´ ì¹¼ë¡œë¦¬ë¥¼ ê³„ì‚°í•´ë³´ì„¸ìš”. ìƒŒë“œìœ„ì¹˜, ìƒëŸ¬ë“œ, ì¿ í‚¤ ë“± ">
    <meta name="keywords" content="ì„œë¸Œì›¨ì´, ì¹¼ë¡œë¦¬, ì˜ì–‘ì„±ë¶„, ì„œë¸Œì›¨ì´ ë‹¤ì´ì–´íŠ¸, ì„œë¸Œì›¨ì´ ì¿ í‚¤, ì„œë¸Œì›¨ì´ ìˆ˜í”„">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

    
    <script>

        function saveReceiptAsImage() {
            const receiptElement = document.querySelector('.receipt-box'); // ì˜ìˆ˜ì¦ ë°•ìŠ¤ ìš”ì†Œ ì„ íƒ
            
            html2canvas(receiptElement).then(canvas => {
                // ìº”ë²„ìŠ¤ë¥¼ ì´ë¯¸ì§€ ë°ì´í„°ë¡œ ë³€í™˜
                const imageData = canvas.toDataURL('image/png');
                
                // iOS í™˜ê²½ ê°ì§€
                const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
                
                if (isIOS) {
                    // iOSì—ì„œëŠ” ì§ì ‘ ë§í¬ë¥¼ í´ë¦­í•˜ë„ë¡ ìœ ë„
                    const newWindowLink = document.createElement('a');
                    newWindowLink.href = imageData;
                    newWindowLink.innerText = "ì—¬ê¸°ë¥¼ í´ë¦­í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ì €ì¥í•˜ì„¸ìš”";
                    newWindowLink.style.display = 'block';
                    newWindowLink.style.marginTop = '20px';
                    newWindowLink.style.color = '#007bff';
                    newWindowLink.style.textDecoration = 'underline';
                    newWindowLink.target = "_blank"; // ìƒˆ ì°½ì—ì„œ ì—´ë¦¬ë„ë¡ ì„¤ì •

                    // ê¸°ì¡´ì˜ ì˜ìˆ˜ì¦ ìƒì ì•„ë˜ì— ë§í¬ ì¶”ê°€
                    document.querySelector('.receipt-box').appendChild(newWindowLink);
                    alert("ì´ë¯¸ì§€ë¥¼ ê¸¸ê²Œ ëˆŒëŸ¬ ì¹´ë©”ë¼ ë¡¤ì— ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
                } else {
                    // iOSê°€ ì•„ë‹Œ ê²½ìš°, ì´ë¯¸ì§€ íŒŒì¼ë¡œ ë‹¤ìš´ë¡œë“œ
                    const downloadLink = document.createElement('a');
                    downloadLink.href = imageData;
                    downloadLink.download = 'nutrition_receipt.png';
                    downloadLink.click();
                }
            });
        }

        function openReceipt() {
            document.getElementById("receiptOverlay").style.display = "flex";
            document.body.style.overflow = "hidden";

            // ì˜ì–‘ ì„±ë¶„ ì—…ë°ì´íŠ¸
            document.getElementById("receipt-weight").innerText = document.getElementById("weight").innerText;
            document.getElementById("receipt-calories").innerText = document.getElementById("calories").innerText;
            document.getElementById("receipt-protein").innerText = document.getElementById("protein").innerText;
            document.getElementById("receipt-saturated-fat").innerText = document.getElementById("saturated-fat").innerText;
            document.getElementById("receipt-sugars").innerText = document.getElementById("sugars").innerText;
            document.getElementById("receipt-sodium").innerText = document.getElementById("sodium").innerText;

            // ì„ íƒí•œ í•­ëª© ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
            const receiptSelectedItems = document.getElementById("receipt-selected-items");
            receiptSelectedItems.innerHTML = ""; // ê¸°ì¡´ ë‚´ìš© ì´ˆê¸°í™”
            const selectedItemsCategories = ["selected-sandwiches", "selected-breads", "selected-cheeses", "selected-sauces", "selected-sides"];
            
            selectedItemsCategories.forEach(categoryId => {
                const selectedItems = getSelectedItems(categoryId);
                selectedItems.forEach(item => {
                    const listItem = document.createElement("li");
                    listItem.textContent = item;
                    receiptSelectedItems.appendChild(listItem);
                });
            });
        }

        // ì˜¤ë²„ë ˆì´ ë‹«ê¸° í•¨ìˆ˜
        function closeReceipt() {
            document.getElementById("receiptOverlay").style.display = "none";
            document.body.style.overflow = "auto"; // ìŠ¤í¬ë¡¤ ë‹¤ì‹œ í™œì„±í™”
        }

        function addItem(selectId, listId) {
            var select = document.getElementById(selectId);
            var selectedItem = select.options[select.selectedIndex].value;
            if (!document.getElementById(selectedItem)) {
                var list = document.getElementById(listId);
                var listItem = document.createElement("li");
                
                listItem.id = selectedItem;
                
                listItem.innerHTML = selectedItem + ' <button onclick="removeItem(\'' + selectedItem + '\')"> ì‚­ì œ </button>';
                list.appendChild(listItem);
            }
        }

        function removeItem(itemId) {
            var listItem = document.getElementById(itemId);
            listItem.parentNode.removeChild(listItem);
        }

        function calculateNutrition() {
    var selectedSandwiches = getSelectedItems("selected-sandwiches");
    var selectedBreads = getSelectedItems("selected-breads");
    var selectedCheeses = getSelectedItems("selected-cheeses");
    var selectedSauces = getSelectedItems("selected-sauces");
    var selectedSides = getSelectedItems("selected-sides");

    fetch('/calculate', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            selected_sandwiches: selectedSandwiches,
            selected_breads: selectedBreads,
            selected_cheeses: selectedCheeses,
            selected_sauces: selectedSauces,
            selected_sides: selectedSides
        })
    }).then(response => response.json())
      .then(data => {
          document.getElementById("weight").innerText = parseFloat(data["weight(g)"]).toFixed(1) + "g";
          document.getElementById("calories").innerText = parseFloat(data["calories(kcal)"]).toFixed(1) + "kcal";
          document.getElementById("protein").innerText = parseFloat(data["protein(g)"]).toFixed(1) + "g";
          document.getElementById("saturated-fat").innerText = parseFloat(data["saturated fat(g)"]).toFixed(1) + "g";
          document.getElementById("sugars").innerText = parseFloat(data["sugars(g)"]).toFixed(1) + "g";
          document.getElementById("sodium").innerText = parseFloat(data["sodium(mg)"]).toFixed(1) + "mg";
      });
}


        function getSelectedItems(listId) {
            var selectedItems = [];
            var list = document.getElementById(listId).children;
            for (var i = 0; i < list.length; i++) {
                selectedItems.push(list[i].id);
            }
            return selectedItems;
        }
    </script>

    <script>
        (function() {
        var analytics = document.createElement('script');
        analytics.src = 'https://cdn.vercel-insights.com/v1/script.tag';
        analytics.async = true;
        analytics.defer = true;
        document.head.appendChild(analytics);
        })();

        import { inject } from '@vercel/analytics';
        // import some helper that is exposed by your current framework to determine the right mode manually
        import { dev } from '$app/environment';
        
        inject({
        mode: dev ? 'development' : 'production',
        });

        function showNotification() {
            var notification = document.getElementById("notification");
            notification.classList.add("show");
            setTimeout(function() {
                notification.classList.remove("show");
            }, 1000); // 1ì´ˆ í›„ ë©”ì‹œì§€ ìˆ¨ê¹€
        }
    
  </script>
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">

  <style>
.overlay {
    display: none; /* ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ */
    position: fixed;
    z-index: 1000;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    justify-content: center;
    align-items: center;
}

/* ì˜¤ë²„ë ˆì´ ë‚´ìš© */
.overlay-content {
    text-align: center;
}

/* 8ë¹„íŠ¸ ì˜ìˆ˜ì¦ ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
.receipt-box {
    background-color: #f9f9f9;
    padding: 20px;
    border: 4px dotted #333;
    width: 300px;
    max-width: 90%;
    font-family: 'Press Start 2P', monospace;
    color: #333;
    box-shadow: 8px 8px 0 #222;
    position: relative;
    text-align: left;
    line-height: 1.6;
}

/* ì˜ìˆ˜ì¦ ì•ˆì˜ í…Œì´ë¸” ìŠ¤íƒ€ì¼ */
.receipt-box table {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
}
.receipt-box table td {
    vertical-align: top;
    padding: 8px;
}

/* ì˜¤ë¥¸ìª½ ì„ íƒ í•­ëª© ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
#receipt-selected-items {
    list-style-type: square;
    padding-left: 20px;
    margin: 0;
    font-size: 13px;
    line-height: 1.5;
}

/* ë‹«ê¸° ë²„íŠ¼ */
.close-button {
    display: block;
    margin: 15px auto 0;
    padding: 8px 16px;
    font-size: 14px;
    background-color: #f44336;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-family: 'Press Start 2P', monospace;
}
.close-button:hover {
    background-color: #d32f2f;
}

.save-button {
    display: block;
    margin: 15px auto 0;
    padding: 8px 16px;
    font-size: 14px;
    background-color: #f44336;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-family: 'Press Start 2P', monospace;
}
.save-button:hover {
    background-color: #d32f2f;
}

.button-container {
    display: flex;
    justify-content: space-between; /* ë²„íŠ¼ ê°„ê²© ê· ë“±í•˜ê²Œ ë°°ì¹˜ */
    width: 100%; /* ì»¨í…Œì´ë„ˆê°€ ë¶€ëª¨ ìš”ì†Œì˜ ë„ˆë¹„ì— ë§ê²Œ */
    padding: 10px 0;
}

/* ê°œë³„ ë²„íŠ¼ ìŠ¤íƒ€ì¼ (ì´ë¯¸ ì •ì˜ëœ ìŠ¤íƒ€ì¼ ìœ ì§€) */
.close-button, .save-button {
    flex: 1; /* ë²„íŠ¼ ë„ˆë¹„ë¥¼ ë™ì¼í•˜ê²Œ */
    margin: 0 5px; /* ë²„íŠ¼ ê°„ì˜ ì•½ê°„ì˜ ê°„ê²© */
}

/* Google Fontsì—ì„œ 8ë¹„íŠ¸ í°íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸° */
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

  </style>
  
</head>
<body>

    <nav>
        <a href="/" class="{% if request.path == '/' %}active{% endif %}">ì„œë¸Œì›¨ì´</a>
        <a href="/salady" class="{% if request.path == '/salady' %}active{% endif %}">ìƒëŸ¬ë””</a>
    </nav>


    <a href="https://subwayyy.kr">
        <img src="{{ url_for('static', filename='images/subway.png') }}" ,alt="SUBWAY" class="logo" width="30%">
    </a>
    <div class="container">
        
        <div class="selection">
            <h3>ğŸ¥ª Select your sandwiches (í† í•‘ë§Œ ë°˜ì˜ë¨)ğŸ¥ª</h3>
            <select id="sandwich-select">
                {% for sandwich in sandwiches %}
                    <option value="{{ sandwich }}">{{ sandwich }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('sandwich-select', 'selected-sandwiches')">Add Sandwich</button>
            <h3>ğŸ Select your bread ğŸ</h3>
            <select id="bread-select">
                {% for bread in breads %}
                    <option value="{{ bread }}">{{ bread }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('bread-select', 'selected-breads')">Add Bread</button>
            <h3>ğŸ§€ Select your cheese ğŸ§€</h3>
            <select id="cheese-select">
                {% for cheese in cheeses %}
                    <option value="{{ cheese }}">{{ cheese }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('cheese-select', 'selected-cheeses')">Add Cheese</button>
            <h3>ğŸ§‚ Select your sauce ğŸ§‚</h3>
            <select id="sauce-select">
                {% for sauce in sauces %}
                    <option value="{{ sauce }}">{{ sauce }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('sauce-select', 'selected-sauces')">Add Sauce</button>

            <h3>ğŸŸ Select your sides ğŸŸ</h3>
            <select id="sides-select">
                {% for side in sides %}
                    <option value="{{ side }}">{{ side }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('sides-select', 'selected-sides')">Add Sides</button>
        </div>
    </div>

    <div class="selected-items">
        <h3>ğŸ• Selected Items ğŸ•</h3>
        <table id="selected_table">
            <tbody>
                <tr>
                    <td><h3>Sandwiches:</h3></td>
                    <td><ul id="selected-sandwiches"></ul></td>
                </tr>
                <tr>
                    <td><h3>Breads:</h3></td>
                    <td><ul id="selected-breads"></ul></td>
                </tr>
                <tr>
                    <td><h3>Cheeses:</h3></td>
                    <td><ul id="selected-cheeses"></ul></td>
                </tr>
                <tr>
                    <td><h3>Sauces:</h3></td>
                    <td><ul id="selected-sauces"></ul></td>
                </tr>
                <tr>
                    <td><h3>Sides:</h3></td>
                    <td><ul id="selected-sides"></ul></td>
                </tr>

            </tbody>
        </table>
    </div>

    <button onclick="calculateNutrition()">Calculate</button>
    <div class="nutrition-info">
        <h3>â­Total Nutrition Informationâ­</h3>
        <table id="nutrition_table">
            <tr>
                <th>Nutrient</th>
                <th>Amount</th>
            </tr>
            <tr>
                <td>ì¤‘ëŸ‰</td>
                <td id="weight">0g</td>
            </tr>
            <tr>
                <td>ì¹¼ë¡œë¦¬</td>
                <td id="calories">0kcal</td>
            </tr>
            <tr>
                <td>ë‹¨ë°±ì§ˆ</td>
                <td id="protein">0g</td>
            </tr>
            <tr>
                <td>í¬í™”ì§€ë°©</td>
                <td id="saturated-fat">0g</td>
            </tr>
            <tr>
                <td>ë‹¹ë¥˜</td>
                <td id="sugars">0g</td>
            </tr>
            <tr>
                <td>ë‚˜íŠ¸ë¥¨</td>
                <td id="sodium">0mg</td>
            </tr>
        </table>
    </div>



    <!-- ë²„íŠ¼ ì¶”ê°€ (ì‚¬ìš©ìê°€ í´ë¦­í•˜ë©´ 8ë¹„íŠ¸ ì˜ìˆ˜ì¦ì´ ëœ¸) -->
    <button onclick="openReceipt()">ê²°ê³¼ ìº¡ì³í•˜ê¸°</button>
    <br><br><br>
    <!-- 8ë¹„íŠ¸ ìŠ¤íƒ€ì¼ ì˜ìˆ˜ì¦ ì˜¤ë²„ë ˆì´ -->
    <div id="receiptOverlay" class="overlay">
        <div class="overlay-content">
            <div class="receipt-box">
                <h3>ğŸ¥ª ë‚˜ì˜ ìƒŒë“œìœ„ì¹˜ ğŸ§¾</h3>
                <table>
                    <tr>
                        <!-- ì˜ì–‘ ì„±ë¶„ -->
                        <td>
                            <table>
                                <tr><td>ì¤‘ëŸ‰:</td><td id="receipt-weight">0g</td></tr>
                                <tr><td>ì¹¼ë¡œë¦¬:</td><td id="receipt-calories">0kcal</td></tr>
                                <tr><td>ë‹¨ë°±ì§ˆ:</td><td id="receipt-protein">0g</td></tr>
                                <tr><td>í¬í™”ì§€ë°©:</td><td id="receipt-saturated-fat">0g</td></tr>
                                <tr><td>ë‹¹ë¥˜:</td><td id="receipt-sugars">0g</td></tr>
                                <tr><td>ë‚˜íŠ¸ë¥¨:</td><td id="receipt-sodium">0mg</td></tr>
                            </table>
                        </td>
                        
                        <!-- ì„ íƒí•œ í•­ëª© -->
                        <td>
                            <h4>ì„ íƒë©”ë‰´</h4>
                            <ul id="receipt-selected-items">
                                <!-- í•­ëª©ë“¤ì´ ì´ê³³ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
                            </ul>
                        </td>
                    </tr>
                </table>
                <div class="button-container">
                    <button onclick="closeReceipt()" class="close-button">ë‹«ê¸°</button>
                    <!-- <button onclick="saveReceiptAsImage()" class="save-button">ì˜ìˆ˜ì¦ì €ì¥</button> -->
                </div>
            </div>
        </div>
    </div>
    

</body>
</html>
