<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3Q4RZMM44P"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3Q4RZMM44P');
</script>
<meta name="google-adsense-account" content="ca-pub-1825078358159503">
<meta name="viewport" content="width=device-width, initial-scale=1.0">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1825078358159503"
     crossorigin="anonymous"></script>

    <meta charset="UTF-8">
    <title>ì„œë¸Œì›¨ì´ ì˜ì–‘ì„±ë¶„ ê³„ì‚°ê¸°</title>
    <meta name="description" content="ì„œë¸Œì›¨ì´ ì¹¼ë¡œë¦¬ë¥¼ ê³„ì‚°í•´ë³´ì„¸ìš”. ìƒŒë“œìœ„ì¹˜, ìƒëŸ¬ë“œ, ì¿ í‚¤ ë“± ">
    <meta name="keywords" content="ì„œë¸Œì›¨ì´, ì¹¼ë¡œë¦¬, ì˜ì–‘ì„±ë¶„, ì„œë¸Œì›¨ì´ ë‹¤ì´ì–´íŠ¸, ì„œë¸Œì›¨ì´ ì¿ í‚¤, ì„œë¸Œì›¨ì´ ìˆ˜í”„">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">

    
    <script>
       // ì˜¤ë²„ë ˆì´ ì—´ê¸° í•¨ìˆ˜
function openReceipt() {
    // ì˜¤ë²„ë ˆì´ë¥¼ ë³´ì´ê²Œ í•¨
    document.getElementById("receiptOverlay").style.display = "flex";
    // ì˜ì–‘ ì„±ë¶„ì„ ì˜ìˆ˜ì¦ì— ì—…ë°ì´íŠ¸
    document.getElementById("receipt-weight").innerText = document.getElementById("weight").innerText;
    document.getElementById("receipt-calories").innerText = document.getElementById("calories").innerText;
    document.getElementById("receipt-protein").innerText = document.getElementById("protein").innerText;
    document.getElementById("receipt-saturated-fat").innerText = document.getElementById("saturated-fat").innerText;
    document.getElementById("receipt-sugars").innerText = document.getElementById("sugars").innerText;
    document.getElementById("receipt-sodium").innerText = document.getElementById("sodium").innerText;
}

// ì˜¤ë²„ë ˆì´ ë‹«ê¸° í•¨ìˆ˜
function closeReceipt() {
    document.getElementById("receiptOverlay").style.display = "none";
}
        
        function addItem(selectId, listId) {
            var select = document.getElementById(selectId);
            var selectedItem = select.options[select.selectedIndex].value;
            if (!document.getElementById(selectedItem)) {
                var list = document.getElementById(listId);
                var listItem = document.createElement("li");
                
                listItem.id = selectedItem;
                
                listItem.innerHTML = selectedItem + ' <button onclick="removeItem(\'' + selectedItem + '\')"> ì‚­ì œ </button>';
                list.appendChild(listItem);
            }
        }

        function removeItem(itemId) {
            var listItem = document.getElementById(itemId);
            listItem.parentNode.removeChild(listItem);
        }

        function calculateNutrition() {
            var selectedSandwiches = getSelectedItems("selected-sandwiches");
            var selectedBreads = getSelectedItems("selected-breads");
            var selectedCheeses = getSelectedItems("selected-cheeses");
            var selectedSauces = getSelectedItems("selected-sauces");
            var selectedSides = getSelectedItems("selected-sides");

            fetch('/calculate', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    selected_sandwiches: selectedSandwiches,
                    selected_breads: selectedBreads,
                    selected_cheeses: selectedCheeses,
                    selected_sauces: selectedSauces,
                    selected_sides: selectedSides
                })
            }).then(response => response.json())
              .then(data => {
                  document.getElementById("weight").innerText = parseFloat(data["weight(g)"]).toFixed(2) + "g";
                  document.getElementById("calories").innerText = parseFloat(data["calories(kcal)"]).toFixed(2) + "kcal";
                  document.getElementById("protein").innerText = parseFloat(data["protein(g)"]).toFixed(2) + "g";
                  document.getElementById("saturated-fat").innerText = parseFloat(data["saturated fat(g)"]).toFixed(2) + "g";
                  document.getElementById("sugars").innerText = parseFloat(data["sugars(g)"]).toFixed(2) + "g";
                  document.getElementById("sodium").innerText = parseFloat(data["sodium(mg)"]).toFixed(2) + "mg";
              });
        }

        function getSelectedItems(listId) {
            var selectedItems = [];
            var list = document.getElementById(listId).children;
            for (var i = 0; i < list.length; i++) {
                selectedItems.push(list[i].id);
            }
            return selectedItems;
        }
    </script>

    <script>
        (function() {
        var analytics = document.createElement('script');
        analytics.src = 'https://cdn.vercel-insights.com/v1/script.tag';
        analytics.async = true;
        analytics.defer = true;
        document.head.appendChild(analytics);
        })();

        import { inject } from '@vercel/analytics';
        // import some helper that is exposed by your current framework to determine the right mode manually
        import { dev } from '$app/environment';
        
        inject({
        mode: dev ? 'development' : 'production',
        });

        function showNotification() {
            var notification = document.getElementById("notification");
            notification.classList.add("show");
            setTimeout(function() {
                notification.classList.remove("show");
            }, 1000); // 1ì´ˆ í›„ ë©”ì‹œì§€ ìˆ¨ê¹€
        }
    
  </script>
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
  
</head>
<body>

    <nav>
        <a href="/" class="{% if request.path == '/' %}active{% endif %}">ì„œë¸Œì›¨ì´</a>
        <a href="/salady" class="{% if request.path == '/salady' %}active{% endif %}">ìƒëŸ¬ë””</a>
    </nav>


    <a href="https://subwayyy.kr">
        <img src="{{ url_for('static', filename='images/subway.png') }}" ,alt="SUBWAY" class="logo" width="30%">
    </a>
    <div class="container">
        
        <div class="selection">
            <h3>ğŸ¥ª Select your sandwiches (í† í•‘ë§Œ ë°˜ì˜ë¨)ğŸ¥ª</h3>
            <select id="sandwich-select">
                {% for sandwich in sandwiches %}
                    <option value="{{ sandwich }}">{{ sandwich }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('sandwich-select', 'selected-sandwiches')">Add Sandwich</button>
            <h3>ğŸ Select your bread ğŸ</h3>
            <select id="bread-select">
                {% for bread in breads %}
                    <option value="{{ bread }}">{{ bread }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('bread-select', 'selected-breads')">Add Bread</button>
            <h3>ğŸ§€ Select your cheese ğŸ§€</h3>
            <select id="cheese-select">
                {% for cheese in cheeses %}
                    <option value="{{ cheese }}">{{ cheese }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('cheese-select', 'selected-cheeses')">Add Cheese</button>
            <h3>ğŸ§‚ Select your sauce ğŸ§‚</h3>
            <select id="sauce-select">
                {% for sauce in sauces %}
                    <option value="{{ sauce }}">{{ sauce }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('sauce-select', 'selected-sauces')">Add Sauce</button>

            <h3>ğŸŸ Select your sides ğŸŸ</h3>
            <select id="sides-select">
                {% for side in sides %}
                    <option value="{{ side }}">{{ side }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('sides-select', 'selected-sides')">Add Sides</button>
        </div>
    </div>

    <div class="selected-items">
        <h3>ğŸ• Selected Items ğŸ•</h3>
        <table id="selected_table">
            <tbody>
                <tr>
                    <td><h3>Sandwiches:</h3></td>
                    <td><ul id="selected-sandwiches"></ul></td>
                </tr>
                <tr>
                    <td><h3>Breads:</h3></td>
                    <td><ul id="selected-breads"></ul></td>
                </tr>
                <tr>
                    <td><h3>Cheeses:</h3></td>
                    <td><ul id="selected-cheeses"></ul></td>
                </tr>
                <tr>
                    <td><h3>Sauces:</h3></td>
                    <td><ul id="selected-sauces"></ul></td>
                </tr>
                <tr>
                    <td><h3>Sides:</h3></td>
                    <td><ul id="selected-sides"></ul></td>
                </tr>

            </tbody>
        </table>
    </div>

    <button onclick="calculateNutrition()">Calculate</button>
    <div class="nutrition-info">
        <h3>â­Total Nutrition Informationâ­</h3>
        <table id="nutrition_table">
            <tr>
                <th>Nutrient</th>
                <th>Amount</th>
            </tr>
            <tr>
                <td>ì¤‘ëŸ‰</td>
                <td id="weight">0g</td>
            </tr>
            <tr>
                <td>ì¹¼ë¡œë¦¬</td>
                <td id="calories">0kcal</td>
            </tr>
            <tr>
                <td>ë‹¨ë°±ì§ˆ</td>
                <td id="protein">0g</td>
            </tr>
            <tr>
                <td>í¬í™”ì§€ë°©</td>
                <td id="saturated-fat">0g</td>
            </tr>
            <tr>
                <td>ë‹¹ë¥˜</td>
                <td id="sugars">0g</td>
            </tr>
            <tr>
                <td>ë‚˜íŠ¸ë¥¨</td>
                <td id="sodium">0mg</td>
            </tr>
        </table>
    </div>


    <button onclick="openReceipt()">ê²°ê³¼ ì´ë¯¸ì§€ë¡œ ì €ì¥</button>

<!-- íŒì—… ëª¨ë‹¬ -->
<div id="nutritionModal" class="modal">
    <div class="modal-content">
        <h3>ğŸ¥ª ì˜ì–‘ì„±ë¶„ ì˜ìˆ˜ì¦ ğŸ¥ª</h3>
        <table>
            <tr><td>ì¤‘ëŸ‰:</td><td id="popup-weight">0g</td></tr>
            <tr><td>ì¹¼ë¡œë¦¬:</td><td id="popup-calories">0kcal</td></tr>
            <tr><td>ë‹¨ë°±ì§ˆ:</td><td id="popup-protein">0g</td></tr>
            <tr><td>í¬í™”ì§€ë°©:</td><td id="popup-saturated-fat">0g</td></tr>
            <tr><td>ë‹¹ë¥˜:</td><td id="popup-sugars">0g</td></tr>
            <tr><td>ë‚˜íŠ¸ë¥¨:</td><td id="popup-sodium">0mg</td></tr>
        </table>
        <button onclick="closeReceipt()">ë‹«ê¸°</button>
    </div>
</div>
</body>
</html>
