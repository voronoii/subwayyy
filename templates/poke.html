{% extends "base.html" %}

{% block title %}í¬ì¼€ì˜¬ë°ì´ ì¹¼ë¡œë¦¬ ê³„ì‚°ê¸° | í¬ì¼€ë³¼ ì˜ì–‘ì„±ë¶„ ë¶„ì„{% endblock %}
{% block head %}
<meta name="description" content="í¬ì¼€ì˜¬ë°ì´ í¬ì¼€ë³¼, ë² ì´ìŠ¤, í† í•‘ì˜ ì •í™•í•œ ì¹¼ë¡œë¦¬ì™€ ì˜ì–‘ì„±ë¶„ì„ ê³„ì‚°í•´ë³´ì„¸ìš”.">
<meta name="keywords" content="í¬ì¼€ì˜¬ë°ì´ ì¹¼ë¡œë¦¬, í¬ì¼€ ì˜ì–‘ì„±ë¶„, í¬ì¼€ë³¼ ì¹¼ë¡œë¦¬, í•˜ì™€ì´ì•ˆ í‘¸ë“œ, í¬ì¼€ ë‹¤ì´ì–´íŠ¸, í¬ì¼€ ë² ì´ìŠ¤">

<!-- Open Graph for Poke -->
<meta property="og:title" content="í¬ì¼€ì˜¬ë°ì´ ì¹¼ë¡œë¦¬ ê³„ì‚°ê¸° | í¬ì¼€ë³¼ ì˜ì–‘ì„±ë¶„ ë¶„ì„">
<meta property="og:description" content="í¬ì¼€ì˜¬ë°ì´ í¬ì¼€ë³¼, ë² ì´ìŠ¤, í† í•‘ì˜ ì •í™•í•œ ì¹¼ë¡œë¦¬ì™€ ì˜ì–‘ì„±ë¶„ì„ ê³„ì‚°í•´ë³´ì„¸ìš”">
<meta property="og:image" content="https://subwayyy.kr{{ url_for('static', filename='images/poke.png') }}">
<meta property="og:url" content="https://subwayyy.kr/calculator/poke">

<!-- Twitter Card for Poke -->
<meta name="twitter:title" content="í¬ì¼€ì˜¬ë°ì´ ì¹¼ë¡œë¦¬ ê³„ì‚°ê¸°">
<meta name="twitter:description" content="í¬ì¼€ì˜¬ë°ì´ ë©”ë‰´ì˜ ì •í™•í•œ ì¹¼ë¡œë¦¬ì™€ ì˜ì–‘ì„±ë¶„ ê³„ì‚°">
<meta name="twitter:image" content="https://subwayyy.kr{{ url_for('static', filename='images/poke.png') }}">

<!-- Resource Hints ìµœì í™” -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://www.googletagmanager.com">
<link rel="preconnect" href="https://pagead2.googlesyndication.com">
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net">

<script defer src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1825078358159503"
    crossorigin="anonymous"></script>
    
<!-- í¬ì¼€ì˜¬ë°ì´ ì „ìš© êµ¬ì¡°í™”ëœ ë°ì´í„° -->
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "NutritionInformation",
    "name": "í¬ì¼€ì˜¬ë°ì´ ì˜ì–‘ì„±ë¶„ ê³„ì‚°ê¸°",
    "description": "í¬ì¼€ì˜¬ë°ì´ í¬ì¼€ë³¼, ë² ì´ìŠ¤, í† í•‘, ì†ŒìŠ¤ì˜ ì •í™•í•œ ì¹¼ë¡œë¦¬ì™€ ì˜ì–‘ì„±ë¶„ì„ ê³„ì‚°í•©ë‹ˆë‹¤",
    "url": "https://subwayyy.kr/poke",
    "about": {
        "@type": "Restaurant",
        "name": "í¬ì¼€ì˜¬ë°ì´",
        "servesCuisine": "Hawaiian"
    },
    "provider": {
        "@type": "Organization",
        "name": "Subwayyy"
    },
    "applicationCategory": "HealthApplication",
    "keywords": ["í¬ì¼€ì˜¬ë°ì´", "í¬ì¼€", "í¬ì¼€ë³¼", "í•˜ì™€ì´ì•ˆ", "ë‹¤ì´ì–´íŠ¸", "ê±´ê°•ì‹ë‹¨", "ì¹¼ë¡œë¦¬"]
}
</script>
{% endblock %}
{% block content %}

<style>
    #notification.show {
        opacity: 1 !important;
        transform: translateX(0) !important;
    }

    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 10px;
        background: linear-gradient(135deg, #e24b3b 0%, #04ab73 50%, #094231 100%);
        min-height: 100vh;
        color: #333;
    }

    main {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        padding: 20px;
        margin: 10px auto;
        max-width: 1200px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(10px);
    }

    .hero-section {
        background: linear-gradient(45deg, #e24b3b, #04ab73);
        color: white;
        padding: 30px;
        border-radius: 15px;
        text-align: center;
        margin-bottom: 30px;
        box-shadow: 0 4px 15px rgba(226, 75, 59, 0.3);
    }

    .hero-section .logo {
        max-width: 300px;
        height: auto;
        margin-bottom: 20px;
        filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
        transition: transform 0.3s ease;
    }

    .hero-section .logo:hover {
        transform: scale(1.05);
    }

    .hero-section h1 {
        margin: 15px 0;
        font-size: 2.5em;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .hero-description {
        font-size: 1.1em;
        margin: 15px 0;
        opacity: 0.9;
    }

    .calculator-section, .results-section {
        background: rgba(4, 171, 115, 0.05);
        padding: 25px;
        border-radius: 15px;
        margin: 20px 0;
        border: 2px solid rgba(4, 171, 115, 0.1);
    }

    .calculator-section h2, .results-section h2 {
        color: #04ab73;
        font-size: 1.8em;
        margin-bottom: 20px;
    }

    .container, .selected-items, .nutrition-info {
        margin: 0 auto;
        max-width: 90%;
    }

    h3 {
        font-size: 1.2em;
        margin: 10px 0;
        color: #094231;
        font-weight: bold;
    }

    select {
        width: auto;
        padding: 10px;
        margin: 10px 0;
        font-size: 1em;
        border: 2px solid #04ab73;
        border-radius: 8px;
        background: white;
        color: #333;
    }

    select:focus {
        outline: none;
        border-color: #e24b3b;
        box-shadow: 0 0 5px rgba(226, 75, 59, 0.3);
    }

    button {
        padding: 10px 20px;
        margin: 10px 0;
        font-size: 1em;
        border: none;
        border-radius: 8px;
        background: #e24b3b;
        color: white;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(226, 75, 59, 0.3);
    }

    button:hover {
        background: linear-gradient(45deg, #04ab73, #094231);
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(4, 171, 115, 0.4);
    }

    table {
        width: 100%;
        border-collapse: collapse;
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    table th, table td {
        text-align: left;
        padding: 12px;
        font-size: 0.9em;
        border-bottom: 1px solid rgba(4, 171, 115, 0.1);
    }

    table th {
        background: linear-gradient(45deg, #e24b3b, #04ab73);
        color: white;
        font-weight: bold;
    }

    table tr:nth-child(even) {
        background: rgba(4, 171, 115, 0.05);
    }

    table tr:hover {
        background: rgba(4, 171, 115, 0.1);
    }

    .tips-section {
        background: linear-gradient(135deg, #ffffff, #f8f9fa);
        padding: 25px;
        border-radius: 15px;
        margin: 20px 0;
        box-shadow: 0 4px 15px rgba(9, 66, 49, 0.1);
        text-align: center;
    }

    .tips-section h3 {
        color: #094231;
    }

    .tips-section a {
        color: #e24b3b;
        font-weight: bold;
        text-decoration: none;
        margin: 0 10px;
    }

    .tips-section a:hover {
        color: #04ab73;
        text-decoration: underline;
    }

    /* ë°˜ì‘í˜• ë¯¸ë””ì–´ ì¿¼ë¦¬ */
    @media screen and (max-width: 768px) {
        h3 {
            font-size: 1em;
        }

        select, button {
            font-size: 0.9em;
            padding: 8px;
        }

        table th, table td {
            font-size: 0.8em;
        }
    }

    @media screen and (max-width: 480px) {
        button {
            font-size: 0.8em;
            padding: 5px;
        }
    }
</style>


<main>
    <header class="hero-section">
        <a href="https://subwayyy.kr/calculator/poke">
            <picture>
                <source srcset="{{ url_for('static', filename='images/poke.png') }}" type="image/png">
                <img src="{{ url_for('static', filename='images/poke.png') }}" alt="í¬ì¼€ì˜¬ë°ì´ ë¡œê³  - ì˜ì–‘ì„±ë¶„ ê³„ì‚°ê¸°" class="logo" width="150"  loading="lazy">
            </picture>
        </a>
        
        <h1>í¬ì¼€ì˜¬ë°ì´ ì˜ì–‘ì„±ë¶„ ê³„ì‚°ê¸°</h1>
        <p class="hero-description">í¬ì¼€ì˜¬ë°ì´ í¬ì¼€ë³¼, ë² ì´ìŠ¤, í† í•‘ì˜ ì •í™•í•œ ì¹¼ë¡œë¦¬ì™€ ì˜ì–‘ì„±ë¶„ì„ ê³„ì‚°í•˜ì—¬ ê· í˜•ì¡íŒ ì‹ë‹¨ì„ ê³„íší•˜ì„¸ìš”.</p>
    </header>

    
    
    <section class="calculator-section">

<script>

    function showNotification() {
        var notification = document.getElementById("notification");
        notification.classList.add("show");
        setTimeout(function() {
            notification.classList.remove("show");
        }, 1000); // 1ì´ˆ í›„ ì•Œë¦¼ ìˆ¨ê¹€
    }


    function addItem(selectId, listId) {
        var select = document.getElementById(selectId);
        var selectedItem = select.options[select.selectedIndex].value;
        if (!document.getElementById(selectedItem)) {
            var list = document.getElementById(listId);
            var listItem = document.createElement("li");
            listItem.id = selectedItem;
            listItem.innerHTML = selectedItem + ' <button onclick="removeItem(\'' + selectedItem + '\')"> ì‚­ì œ </button>';
            list.appendChild(listItem);
            showNotification(); 
        }
    }

    function removeItem(itemId) {
        var listItem = document.getElementById(itemId);
        listItem.parentNode.removeChild(listItem);
    }

    function calculateNutrition() {
        var selectedItems = {
            selected_pokes: getSelectedItems("selected-pokes"),
            selected_toppings: getSelectedItems("selected-toppings"),
            selected_sauces: getSelectedItems("selected-sauces"),
            selected_bases: getSelectedItems("selected-bases")
        }; 

        fetch('/calculate_poke', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(selectedItems)
        }).then(response => response.json())
        .then(data => { 
            document.getElementById('ì—´ëŸ‰(kcal)').innerText = parseFloat(data['ì—´ëŸ‰(kcal)']).toFixed(2);
            document.getElementById('íƒ„ìˆ˜í™”ë¬¼(g)').innerText = parseFloat(data['íƒ„ìˆ˜í™”ë¬¼(g)']).toFixed(2);
            document.getElementById('ë‹¹ë¥˜(g)').innerText = parseFloat(data['ë‹¹ë¥˜(g)']).toFixed(2);
            document.getElementById('ë‹¨ë°±ì§ˆ(g)').innerText = parseFloat(data['ë‹¨ë°±ì§ˆ(g)']).toFixed(2);
            document.getElementById('ì§€ë°©(g)').innerText = parseFloat(data['ì§€ë°©(g)']).toFixed(2);
            document.getElementById('í¬í™”ì§€ë°©(g)').innerText = parseFloat(data['í¬í™”ì§€ë°©(g)']).toFixed(2);
            document.getElementById('ë‚˜íŠ¸ë¥¨(mg)').innerText = parseFloat(data['ë‚˜íŠ¸ë¥¨(mg)']).toFixed(2);
        });
    }

    function getSelectedItems(listId) {
        var selectedItems = [];
        var list = document.getElementById(listId).children;
        for (var i = 0; i < list.length; i++) {
            selectedItems.push(list[i].id);
        }
        return selectedItems;
    }
</script>
    


<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5L5CJDVJ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<body>    
    <div id="notification">ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!</div>
    <div class="container">
        
        <div class="selection">
            
            <!-- poke selection -->
            <h3>ğŸ¥™ pokes ğŸ¥™</h3>
            <select id="poke-select">
                {% for poke in pokes %}
                    <option value="{{ poke }}">{{ poke }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('poke-select', 'selected-pokes')">Add poke</button>

            <h3>ğŸ¥™ bases ğŸ¥™</h3>
            <select id="base-select">
                {% for base in bases %}
                    <option value="{{ base }}">{{ base }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('base-select', 'selected-bases')">Add base</button>

            <h3>ğŸ² toppings ğŸ²</h3>
            <select id="topping-select">
                {% for topping in toppings %}
                    <option value="{{ topping }}">{{ topping }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('topping-select', 'selected-toppings')">Add Topping</button>

            <h3>ğŸ¥— sauces ğŸ¥—</h3>
            <select id="sauce-select">
                {% for sauce in sauces %}
                    <option value="{{ sauce }}">{{ sauce }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('sauce-select', 'selected-sauces')">Add Sauce</button>

          
        </div>
    </div>

        </section>
        
        <section class="results-section">
            <h2 style="text-align: center;">ì„ íƒí•œ ë©”ë‰´ & ì˜ì–‘ì„±ë¶„</h2>
    <div class="selected-items">
        <h3>ğŸ• ì„ íƒí•œ í•­ëª© ğŸ•</h3>
        <table id="selected_table">
            <tbody>
                <tr><td><h3>pokes:</h3></td><td><ul id="selected-pokes"></ul></td></tr>
                <tr><td><h3>bases:</h3></td><td><ul id="selected-bases"></ul></td></tr>
                <tr><td><h3>toppings:</h3></td><td><ul id="selected-toppings"></ul></td></tr>
                <tr><td><h3>sauces:</h3></td><td><ul id="selected-sauces"></ul></td></tr>
                
            </tbody>
        </table>
    </div>

    <button onclick="calculateNutrition()" style="display: block; margin: 0 auto;">ì˜ì–‘ì„±ë¶„ ê³„ì‚°í•˜ê¸°</button>
    <div class="nutrition-info">
        <h3>â­ ì´ ì˜ì–‘ì •ë³´ â­</h3>
        <table id="nutrition_table">
            <tr><th>Nutrient</th><th>Amount</th></tr>
            <tr><td>ì—´ëŸ‰(kcal)</td><td id="ì—´ëŸ‰(kcal)">0g</td></tr>
            <tr><td>íƒ„ìˆ˜í™”ë¬¼(g)</td><td id="íƒ„ìˆ˜í™”ë¬¼(g)">0kcal</td></tr>
            <tr><td>ë‹¹ë¥˜(g)</td><td id="ë‹¹ë¥˜(g)">0g</td></tr>
            <tr><td>ë‹¨ë°±ì§ˆ(g)</td><td id="ë‹¨ë°±ì§ˆ(g)">0g</td></tr>
            <tr><td>ì§€ë°©(g)</td><td id="ì§€ë°©(g)">0g</td></tr>
            <tr><td>í¬í™”ì§€ë°©(g)</td><td id="í¬í™”ì§€ë°©(g)">0mg</td></tr>
            <tr><td>ë‚˜íŠ¸ë¥¨(mg)</td><td id="ë‚˜íŠ¸ë¥¨(mg)">0mg</td></tr>
        </table>
    </div>
    
    </section>
    
    <aside class="tips-section">
                  
            <h3>ë‹¤ë¥¸ ë¸Œëœë“œ ê³„ì‚°ê¸°</h3>
            <p><a href="/calculator/subway">ì„œë¸Œì›¨ì´ ì¹¼ë¡œë¦¬ ê³„ì‚°ê¸°</a><a href="/calculator/salady">ìƒëŸ¬ë”” ì¹¼ë¡œë¦¬ ê³„ì‚°ê¸°</a></p>
            
            <h3>í¬ì¼€ì˜¬ë°ì´ ê³µì‹ í™ˆí˜ì´ì§€</h3>
            <p><a href="https://pokeallday.co.kr/" target="_blank" rel="noopener noreferrer">í¬ì¼€ì˜¬ë°ì´ ê³µì‹ í™ˆí˜ì´ì§€ ë°”ë¡œê°€ê¸°</a></p>
        </div>
    </aside>
    
    </main>
{% endblock %}

