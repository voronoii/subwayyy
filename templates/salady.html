{% extends "base.html" %}

{% block title %}샐러디 칼로리 계산기 | 샐러드·웜볼 영양성분 분석{% endblock %}
{% block head %}
<meta name="description" content="샐러디 샐러드, 웜볼, 프로틴박스의 정확한 칼로리와 영양성분을 무료로 계산하세요. 건강한 다이어트와 영양 관리를 위한 필수 도구입니다.">
<meta name="keywords" content="샐러디 칼로리, 샐러디 영양성분, 샐러디 다이어트, 샐러드 칼로리, 웜볼 칼로리, 프로틴박스 칼로리">

<!-- Open Graph for Salady -->
<meta property="og:title" content="샐러디 칼로리 계산기 | 샐러드·웜볼 영양성분 분석">
<meta property="og:description" content="샐러디 샐러드, 웜볼, 프로틴박스의 정확한 칼로리와 영양성분을 무료로 계산하세요">
<meta property="og:image" content="https://subwayyy.kr{{ url_for('static', filename='images/salady.png') }}">
<meta property="og:url" content="https://subwayyy.kr/calculator/salady">

<!-- Twitter Card for Salady -->
<meta name="twitter:title" content="샐러디 칼로리 계산기">
<meta name="twitter:description" content="샐러디 메뉴의 정확한 칼로리와 영양성분 계산">
<meta name="twitter:image" content="https://subwayyy.kr{{ url_for('static', filename='images/salady.png') }}">

<!-- 샐러디 전용 구조화된 데이터 -->
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "NutritionInformation",
    "name": "샐러디 영양성분 계산기",
    "description": "샐러디 샐러드, 웜볼, 프로틴박스, 샌드위치&랩의 정확한 칼로리와 영양성분을 계산합니다",
    "url": "https://subwayyy.kr/salady",
    "about": {
        "@type": "Restaurant",
        "name": "샐러디",
        "servesCuisine": "Healthy Food"
    },
    "provider": {
        "@type": "Organization",
        "name": "Subwayyy"
    },
    "applicationCategory": "HealthApplication",
    "keywords": ["샐러디", "샐러드", "웜볼", "프로틴박스", "다이어트", "건강식단", "칼로리"]
}
</script>
{% endblock %}
{% block content %}

    <main>
        <header class="hero-section">
            <h1>샐러디 영양성분 계산기</h1>
            <p class="hero-description">샐러디 샐러드, 웜볼, 프로틴박스의 정확한 칼로리와 영양성분을 계산하여 건강한 식단을 계획하세요.</p>
            
            <div class="usage-guide">
                <h2>사용법</h2>
                <p>원하는 메뉴를 선택하고 영양성분을 확인해보세요. 다양한 조합으로 나만의 건강식을 찾을 수 있습니다.</p>
            </div>
        </header>
        
        <section class="calculator-section">
            <h2>메뉴 선택하기</h2>
    
    <script>

        function showNotification() {
            var notification = document.getElementById("notification");
            notification.classList.add("show");
            setTimeout(function() {
                notification.classList.remove("show");
            }, 1000); // 1초 후 알림 숨김
        }


        function addItem(selectId, listId) {
            var select = document.getElementById(selectId);
            var selectedItem = select.options[select.selectedIndex].value;
            if (!document.getElementById(selectedItem)) {
                var list = document.getElementById(listId);
                var listItem = document.createElement("li");
                listItem.id = selectedItem;
                listItem.innerHTML = selectedItem + ' <button onclick="removeItem(\'' + selectedItem + '\')"> 삭제 </button>';
                list.appendChild(listItem);
                showNotification(); 
            }
        }

        function removeItem(itemId) {
            var listItem = document.getElementById(itemId);
            listItem.parentNode.removeChild(listItem);
        }

        function calculateNutrition() {
            var selectedItems = {
                selected_salads: getSelectedItems("selected-salads"),
                selected_warmbowls: getSelectedItems("selected-warmbowls"),
                selected_protein_boxes: getSelectedItems("selected-protein_boxes"),
                selected_sand_wraps: getSelectedItems("selected-sand_wraps"),
                selected_beverages: getSelectedItems("selected-beverages"),
                selected_dressings: getSelectedItems("selected-dressings"),
                selected_toppings: getSelectedItems("selected-toppings"),
                selected_sides_soups: getSelectedItems("selected-sides_soups")
            };

            fetch('/calculate_salady', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(selectedItems)
            }).then(response => response.json())
              .then(data => { 
                  document.getElementById('열량(kcal)').innerText = parseFloat(data['열량(kcal)']).toFixed(2);
                  document.getElementById('탄수화물(g)').innerText = parseFloat(data['탄수화물(g)']).toFixed(2);
                  document.getElementById('당류(g)').innerText = parseFloat(data['당류(g)']).toFixed(2);
                  document.getElementById('단백질(g)').innerText = parseFloat(data['단백질(g)']).toFixed(2);
                  document.getElementById('지방(g)').innerText = parseFloat(data['지방(g)']).toFixed(2);
                  document.getElementById('포화지방(g)').innerText = parseFloat(data['포화지방(g)']).toFixed(2);
                  document.getElementById('나트륨(mg)').innerText = parseFloat(data['나트륨(mg)']).toFixed(2);
              });
        }

        function getSelectedItems(listId) {
            var selectedItems = [];
            var list = document.getElementById(listId).children;
            for (var i = 0; i < list.length; i++) {
                selectedItems.push(list[i].id);
            }
            return selectedItems;
        }
    </script>
</head>
<body>
    

    <a href="https://subwayyy.kr/salady">
        <picture>
            <source srcset="{{ url_for('static', filename='images/salady.webp') }}" type="image/webp">
            <img src="{{ url_for('static', filename='images/salady.png') }}" alt="샐러디 로고 - 영양성분 계산기" class="logo" width="154" height="45" loading="lazy">
        </picture>
    </a>
    <div id="notification">추가되었습니다!</div>

    
    <div class="container">
        <div class="selection">
            <!-- Salad selection -->
            <h3>🥙 salads 🥙</h3>
            <select id="salad-select">
                {% for salad in salads %}
                    <option value="{{ salad }}">{{ salad }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('salad-select', 'selected-salads')">Add Salad</button>

            <h3>🍲 poke / noodle bowls 🍲</h3>
            <select id="warmbowl-select">
                {% for warmbowl in warmbowls %}
                    <option value="{{ warmbowl }}">{{ warmbowl }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('warmbowl-select', 'selected-warmbowls')">Add Warm Bowl</button>

            <h3>🍱 protein boxes 🍱</h3>
            <select id="protein_box-select">
                {% for protein_box in protein_boxes %}
                    <option value="{{ protein_box }}">{{ protein_box }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('protein_box-select', 'selected-protein_boxes')">Add Protein Box</button>

            <h3>🥙 wraps or sandwiches 🥙</h3>
            <select id="sand_wrap-select">
                {% for sand_wrap in sand_wraps %}
                    <option value="{{ sand_wrap }}">{{ sand_wrap }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('sand_wrap-select', 'selected-sand_wraps')">Add Wrap/Sandwich</button>

            <h3>🥤 beverages 🥤</h3>
            <select id="beverage-select">
                {% for beverage in beverages %}
                    <option value="{{ beverage }}">{{ beverage }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('beverage-select', 'selected-beverages')">Add Beverage</button>

            <h3>🥗 dressing (전부/하프) 🥗</h3>
            <select id="dressing-select">
                {% for dressing in dressings %}
                    <option value="{{ dressing }}">{{ dressing }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('dressing-select', 'selected-dressings')">Add Dressing</button>

            <h3>🌿 toppings 🌿</h3>
            <select id="topping-select">
                {% for topping in toppings %}
                    <option value="{{ topping }}">{{ topping }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('topping-select', 'selected-toppings')">Add Topping</button>

            <h3>🍲 side & soup 🍲</h3>
            <select id="side_soup-select">
                {% for side_soup in sides_soups %}
                    <option value="{{ side_soup }}">{{ side_soup }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('side_soup-select', 'selected-sides_soups')">Add Side/Soup</button>
        </div>
    </div>

        </section>
        
        <section class="results-section">
            <h2>선택한 메뉴 & 영양성분</h2>
    <div class="selected-items">
        <h3>🍕 선택한 항목 🍕</h3>
        <table id="selected_table">
            <tbody>
                <tr><td><h3>Salads:</h3></td><td><ul id="selected-salads"></ul></td></tr>
                <tr><td><h3>Warm Bowls:</h3></td><td><ul id="selected-warmbowls"></ul></td></tr>
                <tr><td><h3>Protein Boxes:</h3></td><td><ul id="selected-protein_boxes"></ul></td></tr>
                <tr><td><h3>Wraps/Sandwiches:</h3></td><td><ul id="selected-sand_wraps"></ul></td></tr>
                <tr><td><h3>Beverages:</h3></td><td><ul id="selected-beverages"></ul></td></tr>
                <tr><td><h3>Dressings:</h3></td><td><ul id="selected-dressings"></ul></td></tr>
                <tr><td><h3>Toppings:</h3></td><td><ul id="selected-toppings"></ul></td></tr>
                <tr><td><h3>Sides/Soups:</h3></td><td><ul id="selected-sides_soups"></ul></td></tr>
            </tbody>
        </table>
    </div>

    <button onclick="calculateNutrition()">영양성분 계산하기</button>
    <div class="nutrition-info">
        <h3>⭐ 총 영양정보 ⭐</h3>
        <table id="nutrition_table">
            <tr><th>Nutrient</th><th>Amount</th></tr>
            <tr><td>열량(kcal)</td><td id="열량(kcal)">0g</td></tr>
            <tr><td>탄수화물(g)</td><td id="탄수화물(g)">0kcal</td></tr>
            <tr><td>당류(g)</td><td id="당류(g)">0g</td></tr>
            <tr><td>단백질(g)</td><td id="단백질(g)">0g</td></tr>
            <tr><td>지방(g)</td><td id="지방(g)">0g</td></tr>
            <tr><td>포화지방(g)</td><td id="포화지방(g)">0mg</td></tr>
            <tr><td>나트륨(mg)</td><td id="나트륨(mg)">0mg</td></tr>
        </table>
    </div>
    
    </section>
    
    <aside class="tips-section">
        <h2>건강한 선택 가이드</h2>
        <div class="health-tips">
            <h3>🥗 샐러디 추천 조합</h3>
            <ul>
                <li><strong>다이어트:</strong> 그린샐러드 + 닭가슴살 + 저칼로리 드레싱</li>
                <li><strong>균형식단:</strong> 웜볼 + 현미 베이스 + 다양한 채소</li>
                <li><strong>단백질 보충:</strong> 프로틴박스 + 계란 + 견과류</li>
            </ul>
            
            <h3>🍴 다른 브랜드 계산기</h3>
            <p><a href="/calculator/subway">서브웨이 칼로리 계산기</a> | <a href="/calculator/poke">포케올데이 칼로리 계산기</a></p>
        </div>
    </aside>
    
    </main>
{% endblock %}
