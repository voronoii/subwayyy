<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Google Adsense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1825078358159503"
     crossorigin="anonymous"></script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-L4WC6NVKHG"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-L4WC6NVKHG');
</script>

<meta name="viewport" content="width=device-width, initial-scale=1.0">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1825078358159503"
     crossorigin="anonymous"></script>

    <meta charset="UTF-8">
    <title>SALADY</title>
    <meta name="description" content="ìƒëŸ¬ë”” ì¹¼ë¡œë¦¬ë¥¼ ê³„ì‚°í•´ë³´ì„¸ìš”. ">
    <meta name="keywords" content="ìƒëŸ¬ë””, ì¹¼ë¡œë¦¬, ì˜ì–‘ì„±ë¶„, ìƒëŸ¬ë”” ë‹¤ì´ì–´íŠ¸, ìƒëŸ¬ë”” ìˆ˜í”„">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    
    <script>
        
        function addItem(selectId, listId) {
            var select = document.getElementById(selectId);
            var selectedItem = select.options[select.selectedIndex].value;
            if (!document.getElementById(selectedItem)) {
                var list = document.getElementById(listId);
                var listItem = document.createElement("li");
                
                listItem.id = selectedItem;
                
                listItem.innerHTML = selectedItem + ' <button onclick="removeItem(\'' + selectedItem + '\')"> ì‚­ì œ </button>';
                list.appendChild(listItem);
            }
        }

        function removeItem(itemId) {
            var listItem = document.getElementById(itemId);
            listItem.parentNode.removeChild(listItem);
        }

        function calculateNutrition() {
            var selectedSalads = getSelectedItems("selected-salads");
            var selectedBreads = getSelectedItems("selected-breads");
            var selectedCheeses = getSelectedItems("selected-cheeses");
            var selectedSauces = getSelectedItems("selected-sauces");
            var selectedSides = getSelectedItems("selected-sides");

            fetch('/calculate', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    selected_salads: selectedSalads,
                    selected_breads: selectedBreads,
                    selected_cheeses: selectedCheeses,
                    selected_sauces: selectedSauces,
                    selected_sides: selectedSides
                })
            }).then(response => response.json())
              .then(data => { 
                  document.getElementById('ì—´ëŸ‰(kcal)').innerText = parseFloat(data['ì—´ëŸ‰(kcal)']).toFixed(2) ;
                  document.getElementById('íƒ„ìˆ˜í™”ë¬¼(g)').innerText = parseFloat(data['íƒ„ìˆ˜í™”ë¬¼(g)']).toFixed(2) ;
                  document.getElementById('ë‹¹ë¥˜(g)').innerText = parseFloat(data['ë‹¹ë¥˜(g)']).toFixed(2) ;
                  document.getElementById('ë‹¨ë°±ì§ˆ(g)').innerText = parseFloat(data['ë‹¨ë°±ì§ˆ(g)']).toFixed(2);
                  document.getElementById('ì§€ë°©(g)').innerText = parseFloat(data['ì§€ë°©(g)']).toFixed(2) ;
                  document.getElementById('í¬í™”ì§€ë°©(g)').innerText = parseFloat(data['í¬í™”ì§€ë°©(g)']).toFixed(2) ;
                  document.getElementById('ë‚˜íŠ¸ë¥¨(mg)').innerText = parseFloat(data['ë‚˜íŠ¸ë¥¨(mg)']).toFixed(2) ;

              });
        }

        function getSelectedItems(listId) {
            var selectedItems = [];
            var list = document.getElementById(listId).children;
            for (var i = 0; i < list.length; i++) {
                selectedItems.push(list[i].id);
            }
            return selectedItems;
        }
    </script>

    <script>
        (function() {
        var analytics = document.createElement('script');
        analytics.src = 'https://cdn.vercel-insights.com/v1/script.tag';
        analytics.async = true;
        analytics.defer = true;
        document.head.appendChild(analytics);
        })();

        import { inject } from '@vercel/analytics';
        // import some helper that is exposed by your current framework to determine the right mode manually
        import { dev } from '$app/environment';
        
        inject({
        mode: dev ? 'development' : 'production',
        });

        function showNotification() {
            var notification = document.getElementById("notification");
            notification.classList.add("show");
            setTimeout(function() {
                notification.classList.remove("show");
            }, 1000); // 1ì´ˆ í›„ ë©”ì‹œì§€ ìˆ¨ê¹€
        }
    
  </script>
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
  
</head>
<body>
    <nav>
        <a href="/" class="{% if request.path == '/' %}active{% endif %}">ì„œë¸Œì›¨ì´</a>
        <a href="/salady" class="{% if request.path == '/salady' %}active{% endif %}">ìƒëŸ¬ë””</a>
    </nav>

    <a href="https://subwayyy.kr/salady">
        <img src="{{ url_for('static', filename='images/salady.png') }}" ,alt="SALADY" class="logo" width="30%">
    </a>
    <div class="container">
        
        <div class="selection">
            <h3>ğŸ¥ª Select your saladğŸ¥ª</h3>
            <select id="salad-select">
                {% for salad in salads %}
                    <option value="{{ salad }}">{{ salad }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('salad-select', 'selected-salads')">Add Salad</button>
            <h3>ğŸ Select your bread ğŸ</h3>
            <select id="bread-select">
                {% for bread in breads %}
                    <option value="{{ bread }}">{{ bread }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('bread-select', 'selected-breads')">Add Bread</button>
            <h3>ğŸ§€ Select your cheese ğŸ§€</h3>
            <select id="cheese-select">
                {% for cheese in cheeses %}
                    <option value="{{ cheese }}">{{ cheese }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('cheese-select', 'selected-cheeses')">Add Cheese</button>
            <h3>ğŸ§‚ Select your sauce ğŸ§‚</h3>
            <select id="sauce-select">
                {% for sauce in sauces %}
                    <option value="{{ sauce }}">{{ sauce }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('sauce-select', 'selected-sauces')">Add Sauce</button>

            <h3>ğŸŸ Select your sides ğŸŸ</h3>
            <select id="sides-select">
                {% for side in sides %}
                    <option value="{{ side }}">{{ side }}</option>
                {% endfor %}
            </select>
            <button onclick="addItem('sides-select', 'selected-sides')">Add Sides</button>
        </div>
    </div>

    <div class="selected-items">
        <h3>ğŸ• Selected Items ğŸ•</h3>
        <table id="selected_table">
            <tbody>
                <tr>
                    <td><h3>Sandwiches:</h3></td>
                    <td><ul id="selected-salads"></ul></td>
                </tr>
                <tr>
                    <td><h3>Breads:</h3></td>
                    <td><ul id="selected-breads"></ul></td>
                </tr>
                <tr>
                    <td><h3>Cheeses:</h3></td>
                    <td><ul id="selected-cheeses"></ul></td>
                </tr>
                <tr>
                    <td><h3>Sauces:</h3></td>
                    <td><ul id="selected-sauces"></ul></td>
                </tr>
                <tr>
                    <td><h3>Sides:</h3></td>
                    <td><ul id="selected-sides"></ul></td>
                </tr>

            </tbody>
        </table>
    </div>

    <button onclick="calculateNutrition()">Calculate</button>
    <div class="nutrition-info">
        <h3>â­Total Nutrition Informationâ­</h3>
        <table id="nutrition_table">
            <tr>
                <th>Nutrient</th>
                <th>Amount</th>
            </tr>
            <tr>
                <td>ì—´ëŸ‰(kcal)</td>
                <td id="ì—´ëŸ‰(kcal)">0g</td>
            </tr>
            <tr>
                <td>'íƒ„ìˆ˜í™”ë¬¼(g)'</td>
                <td id="íƒ„ìˆ˜í™”ë¬¼(g)">0kcal</td>
            </tr>
            <tr>
                <td>ë‹¹ë¥˜(g)</td>
                <td id="ë‹¹ë¥˜(g)">0g</td>
            </tr>
            <tr>
                <td>ë‹¨ë°±ì§ˆ(g)</td>
                <td id="ë‹¨ë°±ì§ˆ(g)">0g</td>
            </tr>
            <tr>
                <td>ì§€ë°©(g)</td>
                <td id="ì§€ë°©(g)">0g</td>  
            </tr>
            <tr>
                <td>í¬í™”ì§€ë°©(g)</td>
                <td id="í¬í™”ì§€ë°©(g)">0mg</td>  
            </tr>
            <tr></tr>
                <td>ë‚˜íŠ¸ë¥¨(mg)</td>
                <td id="ë‚˜íŠ¸ë¥¨(mg)">0mg</td>  
            </tr>
        </table>
    </div>
    
</body>
</html>
